<main class="justify-center px-20">
  <h1>{{ title }}</h1>
  <form
    [formGroup]="productForm"
  >
    <div class="grid gap-5 grid-cols-2">
      <!-- <form
        [formGroup]="imageForm"
        autocomplete="off"
        novalidate
      > -->
      <div class="block items-center col-span-2">
        <label class="font-medium text-base" for>Imagenes: </label>
        <div class>
          <div *ngIf="product">
            <!-- <div *ngFor="let img of product.images">
          <img [src]="img"
            class="w-28 rounded-lg shadow-lg"
            alt="Imagen del producto">
        </div> -->
            <div
              (cdkDropListDropped)="drop($event)"
              [cdkDropListData]="images"
              cdkDropList
              cdkDropListOrientation="horizontal"
              class="example-list flex flex-row overflow-hidden rounded bg-white shadow-sm p-3 border border-solid border-gray-400"
            >
              <div
                *ngFor="let image of images"
                class="example-box mx-2 rounded-md text-black block items-center justify-center cursor-move bg-white text-sm flex-grow"
                cdkDrag
              >
                <img [src]="image.imagePath" class="rounded-md" alt />
                {{ image.position }}
              </div>
            </div>
          </div>
          <div class="flex">
            <input
              (change)="captureFiles($event)"
              type="file"
              multiple
              accept="image/*"
              class="hidden"
              #imginput
            />
            <img
              *ngIf="filesSelected.length <= 0"
              width="120"
              class="cursor-pointer"
              src="assets/images/placeholder-image.png"
              alt="Preview"
              (click)="imginput.click()"
            />
            <div *ngFor="let file of filesSelected">
              <img
                *ngIf="file"
                width="120"
                class="cursor-pointer"
                [src]="file || 'assets/images/placeholder-image.png'"
                alt="Preview"
                (click)="imginput.click()"
              />
            </div>
            <!-- <div class="flex" *ngFor="let preview of imageFiles">
                <img [src]="preview" alt="" />
              </div> -->
          </div>

          <!-- <div *ngFor="let img of imgPreview">
              <img [src]="img" class="w-28" alt />
            </div> -->
        </div>
      </div>
      <!-- </form> -->
      <div class="block items-center justify-between col-span-2">
        <label class="font-medium text-base" for> Título: </label>
        <input
          formControlName="name"
          class="w-full p-3 !outline-none border border-solid border-gray-400 rounded text-base font-light"
          type="text"
        />
      </div>
      <div class="block items-center justify-between col-span-2">
        <label class="font-medium text-base" for> Descripción: </label>
        <textarea
          formControlName="description"
          class="w-full p-3 !outline-none border border-solid border-gray-400 rounded resize-none text-base font-light"
        ></textarea>
      </div>
      <div class="flex items-center justify-between space-x-4">
        <label class="font-medium text-base" for> Precio: </label>
        <input
          formControlName="price"
          class="w-3/5 p-3 !outline-none border border-solid border-gray-400 rounded text-base font-light"
          type="number"
        />
      </div>
      <div class="flex items-center col-span-2">
        <label class="font-medium text-base" for> Categoria: </label>
        <mat-radio-group
          formControlName="categoryId"
          aria-labelledby="example-radio-group-label"
          class="example-radio-group"
        >
          <mat-radio-button
            *ngFor="let category of categories"
            [value]="category.id"
            [checked]="category.id == categoryIdChecked ? true : false"
            class="example-radio-button"
          >
            {{ category.name }}
          </mat-radio-button>
        </mat-radio-group>
      </div>
      <div class="flex items-center justify-center col-span-2">
        <button
          [disabled]="productForm.invalid"
          (click)="action()"
          class="bg-secondary rounded text-black py-3 px-5 text-base font-medium shadow-md"
          >
          <!-- type="submit" -->
          {{ actionButton }}
        </button>
      </div>
    </div>
  </form>
</main>

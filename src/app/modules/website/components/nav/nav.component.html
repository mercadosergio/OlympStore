<header class="block md:hidden bg-primary text-white duration-200">
  <nav class="w-full p-4 flex justify-between items-center">
    <button (click)="toggleMobileSidebar()">
      <i class="bi bi-list text-3xl"></i>
    </button>
    <a routerLink="home">
      <img class="w-36" src="./assets/images/olymp-logo.png" alt="Olymp logo" />
    </a>
    <button class="relative">
      <i class="bi bi-cart-fill text-3xl"></i>
      <span
        class="w-5 h-5 leading-5 bg-secondary rounded-full block text-white text-center absolute -top-2.5 -right-2.5"
        >{{ counter }}</span
      >
    </button>
  </nav>
</header>
<aside
  [class.active]="activeMenu"
  class="side-menu fixed top-0 right-0 left-0 bottom-0 z-10 bg-primary text-white flex justify-start ease-out duration-500"
>
  <button (click)="toggleMenu()" class="absolute top-0 right-5 ml-11">
    <i class="bi bi-x-lg text-3xl"></i>
  </button>
  <ul class="w-full mt-11">
    <li>
      <a
        (click)="toggleMenu()"
        class="my-2.5 text-xl block duration-300 hover:border-l-8 hover:border-l-white p-2 pl-8"
        routerLink="home"
      >
        All
      </a>
    </li>
    <li *ngFor="let item of categories">
      <a
        [routerLink]="['/category', item.id]"
        (click)="toggleMenu()"
        class="my-2.5 text-xl block duration-300 hover:border-l-8 hover:border-l-white p-2 pl-8"
      >
        {{ item.name }}
      </a>
    </li>
  </ul>
</aside>
<!-- <header class="hidden md:block duration-200"> -->
<nav class="z-30 hidden md:flex w-full bg-white desktop">
  <div class="w-11/12 m-auto flex justify-between text-black items-center">
    <a routerLink="/" class="mr-4 flex items-center">
      <img
        class="m-2.5 w-60"
        src="./assets/images/olymp-logo.png"
        alt="Olymp logo"
      />
    </a>
    <div>
      <form id="animated-2">
        <input
          type="text"
          class="py-3 px-5 text-sm border border-gray-400 border-r-0 rounded-tl rounded-bl w-52"
          name="q"
          maxlength="100"
        />
        <button
          type="submit"
          class="py-3 px-4 text-base text-center bg-gray-300 rounded-tr rounded-br relative -left-1 hover:bg-gray-400"
        >
          <i class="bi bi-search"></i>
        </button>
      </form>
    </div>
    <div class="mr-2 flex">
      <ng-container
        *ngIf="!(user$ | async) as notLoggedIn"
        class="flex items-center"
      >
        <a class="text-base mx-1 flex items-center" routerLink="/auth/login">
          Login
        </a>
        <a class="text-base mx-1 flex items-center" routerLink="/auth/register">
          Sign up
        </a>
      </ng-container>
      <ng-container *ngIf="user$ | async as user">
        <div class="z-40 relative inline-block text-left">
          <div class="relative ml-3">
            <div>
              <button
                (click)="toggleMenu()"
                type="button"
                class="flex max-w-xs items-center rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800"
                id="user-menu-button"
                aria-expanded="false"
                aria-haspopup="true"
              >
                <span class="sr-only">Open user menu</span>
                <img
                  class="h-8 w-8 rounded-full"
                  src="../assets/images/descarga.jpg"
                  alt
                />
              </button>
            </div>
            <div
              @opacityScale
              *ngIf="isProfileDropdown"
              class="absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
              role="menu"
              aria-orientation="vertical"
              aria-labelledby="menu-button"
              tabindex="-1"
            >
              <div class="px-4 py-3 text-sm text-gray-900">
                <div>{{ user?.email }}</div>
                <div class="font-medium truncate">{{ user?.email }}</div>
              </div>
              <a
                class="block px-4 py-2 text-sm text-gray-700"
                role="menuitem"
                tabindex="-1"
                id="user-menu-item-0"
                routerLink="/profile"
              >
                Settings
              </a>
              <a
                *ngIf="user?.role === 'admin'"
                class="block px-4 py-2 text-sm text-gray-700"
                role="menuitem"
                tabindex="-1"
                id="user-menu-item-1"
                routerLink="/admin"
              >
                Administraci√≥n
              </a>
              <div class="py-2">
                <a
                  (click)="logout()"
                  class="block px-4 py-2 text-sm text-gray-700"
                  role="menuitem"
                  tabindex="-1"
                  id="user-menu-item-2"
                  routerLink
                >
                  Sign out
                </a>
              </div>
            </div>
          </div>
        </div>
        <div
          *ngIf="isProfileDropdown"
          (click)="toggleMenu()"
          class="fixed inset-0"
        ></div>
      </ng-container>
    </div>
  </div>
</nav>
<nav
  class="z-30 hidden md:flex px-4 justify-center bg-primary text-white h-16 sticky top-0 drop-shadow desktop"
  [ngClass]="navbarfixed ? 'transparent-bg' : ''"
>
  <div class="flex items-center">
    <ul class="ml-16 flex list-none h-full">
      <li class="mr-2.5 flex">
        <a
          class="text-base mx-1 flex items-center py-2 px-3 menu-item ease-out duration-200 hover:bg-secondary"
          routerLinkActive="active"
          href
          routerLink="home"
        >
          Todos
        </a>
      </li>
      <li *ngFor="let item of categories" class="mr-2.5 flex">
        <a
          [routerLink]="['/category', item.id]"
          class="text-base mx-1 flex items-center py-2 px-3 menu-item ease-out duration-200 hover:bg-secondary"
          routerLinkActive="active"
        >
          {{ item.name }}
        </a>
      </li>
    </ul>
  </div>
  <div class="flex items-center">
    <div class="relative mx-4">
      <a
        (click)="toggleSlideOver()"
        [ngClass]="cartState ? 'scale' : ''"
        type="button"
        class="cursor-pointer hover:text-gray-200 transition-all duration-200 ease-out"
      >
        <fa-icon [icon]="faShoppingCart" class="text-2xl"></fa-icon>
      </a>

      <span
        [ngClass]="cartState ? 'scale' : ''"
        class="w-5 h-5 leading-5 bg-secondary rounded-full block text-white text-center absolute -top-2.5 -right-2.5 transition-all duration-200 ease-out"
      >
        {{ itemsCount }}
      </span>
    </div>
  </div>
</nav>
<!-- </header> -->

<div
  @opacity
  *ngIf="isSlideoverVisible"
  class="z-50 fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
></div>

<div
  @translateX
  *ngIf="isSlideoverVisible"
  class="z-50 fixed inset-0 overflow-hidden"
>
  <div class="absolute inset-0 overflow-hidden">
    <div
      @opacity
      *ngIf="isSlideoverVisible"
      (click)="toggleSlideOver()"
      class="fixed inset-0"
    ></div>

    <div
      class="pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10"
    >
      <div
        @translateX
        *ngIf="isSlideoverVisible"
        class="pointer-events-auto relative w-screen max-w-md"
      >
        <div
          @opacity
          *ngIf="isSlideoverVisible"
          class="absolute top-0 left-0 -ml-8 flex pt-4 pr-2 sm:-ml-10 sm:pr-4"
        >
          <button
            type="button"
            (click)="toggleSlideOver()"
            class="rounded-md text-2xl text-white hover:text-secondary focus:outline-none focus:ring-2 focus:ring-white"
          >
            <fa-icon [icon]="faXmark"></fa-icon>
          </button>
        </div>

        <div
          class="flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl"
        >
          <div class="px-4 sm:px-6">
            <h2
              class="!my-auto text-base font-semibold leading-6 text-gray-900"
              id="slide-over-title"
            >
              Mi carrito
            </h2>
          </div>
          <div
            class="h-full relative mt-6 flex flex-col px-4 sm:px-6 rounded-2xl border border-solid border-gray-300 mx-4"
          >
            <div *ngFor="let item of items" class="flex flex-col">
              <div class="flex items-center justify-between my-2">
                <img width="60" [src]="item.images[0].imagePath" alt="" />
                <h3 class="!my-auto">{{ item.name }}</h3>
                <span> {{ item.OrderProduct.amount }} </span>
              </div>
            </div>
            <div class="flex justify-center space-x-4 mt-auto">
              <a
                routerLink=""
                class="rounded-md py-3 px-6 bg-primary hover:bg-secondary text-white text-base"
                >Pagar</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
